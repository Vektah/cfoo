#!/usr/bin/env ruby

lib_path = File.expand_path('../../lib', __FILE__)
$LOAD_PATH.unshift lib_path unless $LOAD_PATH.include? lib_path
require 'cfoo'

if ARGV.empty?
    STDERR.puts "Usage: #{File.basename $0} filename"
    exit 1
end

filename = ARGV.shift

project = Cfoo::Project.new(".")
processor = Cfoo::Processor.new(project)
cfoo = Cfoo::Cfoo.new(processor, STDOUT)

cfoo.process filename
